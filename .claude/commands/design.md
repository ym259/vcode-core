# /design - デザインリサーチ & フィードバック

コーディングを始める前に、ユーザーと一緒にデザインの方向性を決めます。

## 前提

- ユーザーが何を作りたいか（例：LMS、ECサイト）は既に分かっている状態で実行する
- `/start` フローの一部として自動的に呼ばれるか、単独で `/design` として実行される

## 重要な原則

- **デフォルトではブラウザでのクローリングをしない。** Claude の知識でデザイン候補を提示する。
- SaaS のログイン後の画面はアクセスできないため、クローリングしてもLPしか見えず参考にならない。
- Claude はデザインパターン、有名アプリのUI構成、レイアウト手法について十分な知識を持っている。
- **ブラウザを使うのは以下の場合のみ：**
  - ユーザーが「〇〇のようなデザインにしたい」と具体的なアプリ名を挙げ、Claude がそのアプリのUIを十分に把握していない場合
  - その場合、LPを閲覧するか、Google画像検索で「〇〇 app screenshot」等を検索してUI画面を確認する

## 手順

### ステップ 1: レイアウトの選択

アプリの種類に合わせて、レイアウトパターンの候補を `AskUserQuestion` で提示する。

各選択肢には、そのレイアウトを採用している有名アプリの名前を添えてイメージしやすくする。

例（アプリ種類に合わせて動的に生成する）：
```
question: "レイアウトはどのタイプにしますか？"
header: "レイアウト"
options:
  - label: "サイドバー型"
    description: "Notionのように左側にメニュー、右側にコンテンツ。整理された印象"
  - label: "トップナビ型"
    description: "Courseraのように上部にナビゲーション。コンテンツ幅が広い"
  - label: "ミニマル型"
    description: "Google Classroomのようにシンプル。情報量を絞った印象"
  - label: "ダッシュボード型"
    description: "Slackのようにサイドバー＋ヘッダー。多機能アプリ向け"
```

### ステップ 2: カラーの選択

`AskUserQuestion` でカラーの方向性を聞く。

```
question: "色の雰囲気はどんな感じにしますか？"
header: "カラー"
options:
  - label: "ブルー系（デフォルト）"
    description: "信頼感・知的な印象。教育やビジネス系に人気"
  - label: "グリーン系"
    description: "自然・安心感。ヘルスケアや環境系に合う"
  - label: "パープル系"
    description: "クリエイティブ・先進的な印象。テックやデザイン系に合う"
  - label: "ダーク系"
    description: "高級感・モダン。ダークモード中心のUI"
```

### ステップ 3: 雰囲気の選択

`AskUserQuestion` で全体の雰囲気を聞く。

```
question: "全体の雰囲気はどんな感じにしたいですか？"
header: "雰囲気"
options:
  - label: "プロフェッショナル"
    description: "ビジネス向け。落ち着いた配色、きっちりしたレイアウト"
  - label: "カジュアル"
    description: "フレンドリーで親しみやすい。丸みのあるUI"
  - label: "ミニマル"
    description: "余白を活かしたクリーンなデザイン。情報を厳選"
  - label: "ポップ"
    description: "カラフルで楽しい印象。若いユーザー向け"
```

**ユーザーが「〇〇みたいなデザイン」と具体的なアプリを指定してきた場合：**
1. Claude がそのアプリのUIを知っていれば → そのまま特徴を説明し、取り入れる要素を確認
2. Claude が十分に把握していなければ → Chrome MCP でLPを閲覧するか、Google画像検索で「アプリ名 app screenshot」を検索してUIを確認

### ステップ 4: デザインシステムの更新

ユーザーのフィードバックをもとに、以下のファイルを更新する：

#### 4a. `src/app/globals.css` のCSS変数を更新
- `--primary` と `--primary-foreground`: ユーザーが選んだメインカラー
- `--ring` と `--sidebar-primary`: primaryに合わせて更新
- `--sidebar-ring`: primaryに合わせて更新
- ダークモード側の `--primary` も合わせて調整
- カラー値はすべて oklch() 形式を維持する

oklch 参考値（よく使うカラー）：
```
/* Blue系 */
oklch(0.488 0.18 264)   /* indigo-blue (default) */
oklch(0.546 0.245 262)  /* vivid blue */
oklch(0.623 0.214 259)  /* sky blue */

/* Green系 */
oklch(0.527 0.15 155)   /* emerald */
oklch(0.448 0.119 151)  /* dark green */

/* Purple系 */
oklch(0.496 0.215 292)  /* violet */
oklch(0.558 0.288 302)  /* vivid purple */

/* Red/Orange系 */
oklch(0.577 0.245 27)   /* red (destructive default) */
oklch(0.705 0.213 47)   /* orange */

/* Warm系 */
oklch(0.554 0.135 66)   /* amber */

/* Neutral系 */
oklch(0.37 0.013 285)   /* dark zinc */
oklch(0.21 0.006 286)   /* near black */
```

#### 4b. `.claude/rules/design-system.md` を更新
ユーザーが選んだレイアウトパターンやカラーの方針を反映する。
例：
- 「サイドバー + ヘッダー」を選んだ → レイアウトセクションに明記
- 「ダーク系」を選んだ → 「ダークモードをデフォルトにする」を追記
- カラーの制約を追記（「ピンクは使わない」など）

#### 4c. `PROJECT.md` にデザイン方針を追記
```markdown
## デザイン方針
- レイアウト: [選択されたレイアウト]
- メインカラー: [カラー名と用途]
- 雰囲気: [選択された雰囲気]
- 参考アプリ: [ユーザーが言及したアプリ]
- その他: [ユーザーからの具体的な要望]
```

### ステップ 5: 完了

デザインが決定したら：
「デザインの方向性が決まりました！この設定で開発を進めていきます 🎨」

`/start` から呼ばれた場合は、次のステップ（機能の実装）に自動的に進む。

**注意: このステップではプレビューページの作成やサーバー起動はしない。** 実装フェーズで最初のページを作るときにデザインが反映される。

## 単独実行時の注意

`/start` を経由せずに `/design` を単独で実行された場合：
1. まず「何を作っていますか？」と聞く
2. `PROJECT.md` が存在すればそこから情報を読み取る
3. 存在しなければ、アプリの種類を確認してからステップ 1 に進む
